{% extends "base.html" %}

{% block content %}


<br><br>




      {% if current_user.id not in  (whatIOrdered | map(attribute='user_id') | list) %}
      <div>You haven't purchased from this seller. Make a purchase to leave a review! </div>
      {% elif current_user.id not in (specProRating | map(attribute='user_id') | list) %}

      <div>You made a purchase for this seller. <a href="{{ url_for('sellerRatings.update_stars_ratings', sid=seller_id, uid=current_user.id, seller_name = seller_name) }}">Want to leave a review?</a> <!--replace 1 with current.user_id--> </div>


      {% else %}

      <h2>Your seller rating:</h2>
      <table id="sellerRatings" class='table table-hover table-bordered'>
        <thead class="thead-dark">
          <tr>
            
            <th scope="col">Seller ID</th>
            
            <th scope="col">Stars out of five</th>
            <th scope="col">Rating content</th>
            <th scope="col">Submission date</th>
          </tr>
        </thead>
        
          <tbody>

              {% for rating in yourPersonal%}
            <tr>
              <!-- user_id, seller_id, starsOutOfFive, ratingContent, submissionDate -->
              <td>{{rating.user_id}}</td>
              
              <td><a href="{{ url_for('sellerRatings.update_stars_ratings', sid=rating.seller_id, uid=current_user.id, seller_name = seller_name) }}">{{rating.starsOutOfFive}}</a></td> <!--replace 1 with current.user_id-->
              <td><a href="{{ url_for('sellerRatings.update_stars_ratings', sid=rating.seller_id, uid=current_user.id, seller_name = seller_name) }}">{{rating.ratingContent}}</a></td> <!--replace 1 with current.user_id-->
              <td>{{rating.submissionDate}}</td>
            </tr>
          {% endfor %}

          
            
          </tbody>
      </table>

      {% endif %}
      
      <h5>All ratings for seller {{seller_name}}</h5>
      
      <table id="sellerRatings" class='table table-hover table-bordered'>
        <thead class="thead-dark">
          <tr>
            
            <th scope="col">Rater first name </th>
            <th scope="col">Rater last name</th>
            <th scope="col">Rater id</th>
            <th scope="col">Stars out of five</th>
            <th scope="col">Rating content</th>
            <th scope="col">Submission date</th>
          </tr>
        </thead>
        
          <tbody>

              {% for rating in get_all_sratings%}
            <tr>
              
              <td>{{rating[5]}}</td>
              <td>{{rating[6]}}</td>
              <td>{{rating[0]}}</td>
              
              <td><a href="{{ url_for('sellerRatings.update_stars_ratings', sid=rating[1], uid=current_user.id, seller_name = name) }}">{{rating[2]}}</a></td> <!--replace 1 with current.user_id-->
              <td><a href="{{ url_for('sellerRatings.update_stars_ratings', sid=rating[1], uid=current_user.id, seller_name = name) }}">{{rating[3]}}</a></td> <!--replace 1 with current.user_id-->
              <td>{{rating[4]}}</td>
            </tr>
          {% endfor %}

          
            
          </tbody>
      </table>



{% endblock %}
