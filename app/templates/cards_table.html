{% extends "base.html" %}

{% block content %}

{% block scripts %}
  <script>
    $(document).ready(function () {
      $('#products_cards').DataTable();
    });
  </script>
{% endblock %}

<h2>Products for sale:</h2>
<table id="products_cards" class='table'>
  <thead class="thead-dark">
    <tr>
      <th scope="col"></th>
      <th scope="col"></th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    {% for product_row in avail_products | batch(4, '&nbsp;') %}
<tr class="row justify-content-center">
    {% for product in product_row %}
    {% if product is not string %}
    <td>
    <div class="card m-4" style="width:300px">
      <img class="card-img-top" src="{{product.img_url}}" alt="Card image" style="width:100%">
      <div class="card-body">
        <h4 class="card-title">{{product.name}}</h4>
        <p class="card-text">Price: {{product.price}}<span class="badge rounded-pill bg-info text-light mx-4">{{product.category}}</span></p>
        <!-- link to individual product page -->
        <a href="{{ url_for('products.product', id=product.id) }}" class="btn btn-primary stretched-link">View</a>
      </div>
    </div>
    </td>
    {% endif %}
    {% endfor %}
</tr>
{% endfor %}
  </tbody>
</table>

{% endblock %}